(()=>{"use strict";var t={5874:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"/* Main images button */\n\n#dt-tab > div.tab-content-container {\n  position: relative;\n  overflow: visible;\n}\n\ndiv.download-button.download-main-images-button {\n  top: -12px;\n  left: -12px;\n}\n\n/* Video button */\n\n.download-details-video-button {\n  top: -10px;\n  left: -15px;\n}\n\n/* Variation images button */\n\n#skuWrap > dl.sku-attr-dl.IMAGE {\n  overflow: visible;\n}\n\ndiv.download-button.download-variation-images-button {\n  top: 2px;\n  left: 80px;\n}\n\n/*  Details images button */\n\n#offer_video_wrap {\n  position: relative;\n}\n\n.download-button.download-details-images-button {\n  top: 2px;\n  left: 2px;\n}\n\n/* Video button */\n\n.download-video-button {\n  top: 0px;\n  left: 0px;\n}",""]);const i=o},2644:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,'.download-button {\n  font-size: 12px;\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  width: 25px;\n  height: 25px;\n  cursor: pointer;\n  z-index: 1;\n}\n\n.download-button img {\n  -webkit-transition: 0.2s ease;\n  transition: 0.2s ease;\n}\n\n.download-button img:hover {\n  -webkit-transform: scale(1.1);\n  transform: scale(1.1);\n}\n\n/* Tooltip container */\n.tooltip {\n  position: relative;\n  display: inline-block;\n  border-bottom: 1px dotted black; /* If you want dots under the hoverable text */\n}\n\n/* Tooltip text */\n.download-button .tooltiptext {\n  z-index: 100;\n  visibility: hidden;\n  width: 120px;\n  background-color: #555;\n  color: #fff;\n  text-align: center;\n  padding: 5px 0;\n  border-radius: 6px;\n\n  /* Position the tooltip text */\n  position: absolute;\n  z-index: 1;\n  bottom: 0%;\n  left: 125%;\n  margin-left: 0px;\n\n  /* Fade in tooltip */\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n/* Tooltip arrow */\n.download-button .tooltiptext::after {\n  content: "";\n  position: absolute;\n  top: 50%;\n  right: 100%;\n  margin-top: -5px;\n  border-width: 5px;\n  border-style: solid;\n  border-color: transparent #555 transparent transparent;\n}\n\n/* Show the tooltip text when you mouse over the tooltip container */\n.download-button:hover .tooltiptext {\n  visibility: visible;\n  opacity: 1;\n}',""]);const i=o},9026:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"/* Main images button */\n\n#J_UlThumb, #J_isku ul.tb-img, .J_Prop.tb-prop {\n  position: relative;\n  overflow: visible;\n}\n\n.tb-gallery {\n  overflow: visible;\n}\n\ndiv.download-button.download-main-images-button {\n  top: -12px;\n  left: -12px;\n}\n\ndiv.download-button.download-main-images-button.shift {\n  top: -12px;\n  left: 54px;\n}\n\n/* Variation images button */\n\n#skuWrap > dl.sku-attr-dl.IMAGE {\n  overflow: visible;\n}\n\ndiv.download-button.download-variation-images-button {\n  top: -7px;\n  left: 52px;\n}\n\n/*  Details images button */\n\n#description {\n  position: relative;\n}\n\n.download-button.download-details-images-button {\n  z-index: 2;\n  top: -12px;\n  left: 2px;\n}\n\n/* Video button */\n\n.download-video-button {\n  top: -12px;\n  left: -12px;\n}",""]);const i=o},3006:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(3645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"/* Main images button */\n\n#dt-tab > div.tab-content-container {\n  position: relative;\n  overflow: initial;\n}\n\ndiv.download-button.download-main-images-button {\n  top: 2px;\n  left: 2px;\n}\n\n/* Video button */\n\n#item-flash {\n  position: relative;\n}\n\n.download-details-video-button {\n  z-index: 20;\n  top: -12px;\n  left: -12px;\n}\n\n.download-main-video-button {\n  top: -10px;\n  left: -15px;\n}\n\n/* Variation images button */\n\n.tm-img-prop {\n  position: relative;\n}\n\ndiv.download-button.download-variation-images-button {\n  top: -7px;\n  left: 55px;\n}\n\n/*  Details images button */\n\n#description {\n  position: relative;\n}\n\n.download-button.download-details-images-button {\n  z-index: 2;\n  top: -12px;\n  left: 2px;\n}\n\n/* Video button */\n\n.download-video-button {\n  top: 0px;\n  left: 0px;\n}",""]);const i=o},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var u=[].concat(t[a]);r&&o[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},1877:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var r=n(3379),o=n.n(r),i=n(5874);o()(i.Z,{insert:"head",singleton:!1});const s=i.Z.locals||{}},6318:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var r=n(3379),o=n.n(r),i=n(9026);o()(i.Z,{insert:"head",singleton:!1});const s=i.Z.locals||{}},1907:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var r=n(3379),o=n.n(r),i=n(3006);o()(i.Z,{insert:"head",singleton:!1});const s=i.Z.locals||{}},3379:(t,e,n)=>{var r,o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function s(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function a(t,e){for(var n={},r=[],o=0;o<t.length;o++){var a=t[o],u=e.base?a[0]+e.base:a[0],c=n[u]||0,d="".concat(u," ").concat(c);n[u]=c+1;var l=s(d),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==l?(i[l].references++,i[l].updater(p)):i.push({identifier:d,updater:h(p,e),references:1}),r.push(d)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var c,d=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function l(t,e,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=d(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function p(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var f=null,b=0;function h(t,e){var n,r,o;if(e.singleton){var i=b++;n=f||(f=u(e)),r=l.bind(null,n,i,!1),o=l.bind(null,n,i,!0)}else n=u(e),r=p.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var o=s(n[r]);i[o].references--}for(var u=a(t,e),c=0;c<n.length;c++){var d=s(n[c]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}n=u}}}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t=n(3379),e=n.n(t),r=n(2644);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;var c=function(t){return t.startsWith("//")?"".concat(document.location.protocol).concat(t):t},d=function(t){return t.map((function(t){return t&&c(t)})).filter((function(t){return!!t}))},l=function(t){return t.filter((function(t){return t.width>1&&t.height>1}))},p=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;chrome.runtime.sendMessage({type:"DOWNLOAD",payload:u({section:t,aliVersion:2,pageUrl:document.location.href},e)},n)}},f=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){var r=n.querySelector("img");r&&r.setAttribute("src",chrome.extension.getURL("icons/loader.gif")),p(t)(e,(function(){r&&r.setAttribute("src",chrome.extension.getURL("icons/dl-all.png"))}))}}},b=function(t){var e=t.id,n=t.classes,r=void 0===n?[]:n,o=t.attribues,s=void 0===o?[]:o,a=t.license,u=1,c=document.createElement("div");e&&c.setAttribute("id",e);var d=[].concat(i(r),["download-button"]).reduce((function(t,e){return"".concat(t," ").concat(e)}),"");c.setAttribute("class",d),s.forEach((function(t){c.setAttribute(t.name,t.value)}));var l=document.createElement("img");if(l.setAttribute("src",chrome.extension.getURL("icons/dl-all.png")),l.setAttribute("width","25"),l.setAttribute("height","25"),c.appendChild(l),!1===u){var p=document.createElement("span");p.setAttribute("class","tooltiptext"),p.innerText="Pro version only",c.appendChild(p)}return c},h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function v(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var y="undefined"!=typeof window&&window,m="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,g=void 0!==n.g&&n.g,w=y||g||m;function x(t){return"function"==typeof t}var S=!1,E={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,S=t},get useDeprecatedSynchronousErrorHandling(){return S}};function _(t){setTimeout((function(){throw t}),0)}var T={closed:!0,next:function(t){},error:function(t){if(E.useDeprecatedSynchronousErrorHandling)throw t;_(t)},complete:function(){}},O=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function A(t){return null!==t&&"object"==typeof t}var j=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),U=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,r=n._parentOrParents,o=n._ctorUnsubscribe,i=n._unsubscribe,s=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(var a=0;a<r.length;++a)r[a].remove(this);if(x(i)){o&&(this._unsubscribe=void 0);try{i.call(this)}catch(t){e=t instanceof j?q(t.errors):[t]}}if(O(s)){a=-1;for(var u=s.length;++a<u;){var c=s[a];if(A(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof j?e=e.concat(q(t.errors)):e.push(t)}}}if(e)throw new j(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof t){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function q(t){return t.reduce((function(t,e){return t.concat(e instanceof j?e.errors:e)}),[])}var L=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),P=function(t){function e(n,r,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=T;break;case 1:if(!n){i.destination=T;break}if("object"==typeof n){n instanceof e?(i.syncErrorThrowable=n.syncErrorThrowable,i.destination=n,n.add(i)):(i.syncErrorThrowable=!0,i.destination=new M(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new M(i,n,r,o)}return i}return v(e,t),e.prototype[L]=function(){return this},e.create=function(t,n,r){var o=new e(t,n,r);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(U),M=function(t){function e(e,n,r,o){var i,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return x(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==T&&(x((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=i,s._error=r,s._complete=o,s}return v(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;E.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=E.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):_(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;_(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};E.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),E.useDeprecatedSynchronousErrorHandling)throw t;_(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!E.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return E.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(_(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(P),D=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function k(t){return t}function C(t){return 0===t.length?k:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var H=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,o=function(t,e,n){if(t){if(t instanceof P)return t;if(t[L])return t[L]()}return t||e||n?new P(t,e,n):new P(T)}(t,e,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||E.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),E.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){E.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,r=e.destination,o=e.isStopped;if(n||o)return!1;t=r&&r instanceof P?r:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=R(e))((function(e,r){var o;o=n.subscribe((function(e){try{t(e)}catch(t){r(t),o&&o.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[D]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:C(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=R(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function R(t){if(t||(t=E.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function N(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new I(t,e))}}var I=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new V(t,this.project,this.thisArg))},t}(),V=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return v(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(P);function F(t,e){return void 0===e&&(e=null),new B({method:"GET",url:t,headers:e})}function J(t,e,n){return new B({method:"POST",url:t,body:e,headers:n})}function X(t,e){return new B({method:"DELETE",url:t,headers:e})}function z(t,e,n){return new B({method:"PUT",url:t,body:e,headers:n})}function Z(t,e,n){return new B({method:"PATCH",url:t,body:e,headers:n})}var G=N((function(t,e){return t.response}));function W(t,e){return G(new B({method:"GET",url:t,responseType:"json",headers:e}))}var B=function(t){function e(e){var n=t.call(this)||this,r={async:!0,createXHR:function(){return this.crossDomain?function(){if(w.XMLHttpRequest)return new w.XMLHttpRequest;if(w.XDomainRequest)return new w.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(w.XMLHttpRequest)return new w.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;n<3;n++)try{if(t=e[n],new w.ActiveXObject(t))break}catch(t){}return new w.ActiveXObject(t)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof e)r.url=e;else for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);return n.request=r,n}var n;return v(e,t),e.prototype._subscribe=function(t){return new Y(t,this.request)},e.create=((n=function(t){return new e(t)}).get=F,n.post=J,n.delete=X,n.put=z,n.patch=Z,n.getJSON=W,n),e}(H),Y=function(t){function e(e,n){var r=t.call(this,e)||this;r.request=n,r.done=!1;var o=n.headers=n.headers||{};return n.crossDomain||r.getHeader(o,"X-Requested-With")||(o["X-Requested-With"]="XMLHttpRequest"),r.getHeader(o,"Content-Type")||w.FormData&&n.body instanceof w.FormData||void 0===n.body||(o["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=r.serializeBody(n.body,r.getHeader(n.headers,"Content-Type")),r.send(),r}return v(e,t),e.prototype.next=function(t){this.done=!0;var e,n=this,r=n.xhr,o=n.request,i=n.destination;try{e=new K(t,r,o)}catch(t){return i.error(t)}i.next(e)},e.prototype.send=function(){var t=this.request,e=this.request,n=e.user,r=e.method,o=e.url,i=e.async,s=e.password,a=e.headers,u=e.body;try{var c=this.xhr=t.createXHR();this.setupEvents(c,t),n?c.open(r,o,i,n,s):c.open(r,o,i),i&&(c.timeout=t.timeout,c.responseType=t.responseType),"withCredentials"in c&&(c.withCredentials=!!t.withCredentials),this.setHeaders(c,a),u?c.send(u):c.send()}catch(t){this.error(t)}},e.prototype.serializeBody=function(t,e){if(!t||"string"==typeof t)return t;if(w.FormData&&t instanceof w.FormData)return t;if(e){var n=e.indexOf(";");-1!==n&&(e=e.substring(0,n))}switch(e){case"application/x-www-form-urlencoded":return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&");case"application/json":return JSON.stringify(t);default:return t}},e.prototype.setHeaders=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setRequestHeader(n,e[n])},e.prototype.getHeader=function(t,e){for(var n in t)if(n.toLowerCase()===e.toLowerCase())return t[n]},e.prototype.setupEvents=function(t,e){var n,r,o=e.progressSubscriber;function i(t){var e,n=i,r=n.subscriber,o=n.progressSubscriber,s=n.request;o&&o.error(t);try{e=new tt(this,s)}catch(t){e=t}r.error(e)}(t.ontimeout=i,i.request=e,i.subscriber=this,i.progressSubscriber=o,t.upload&&"withCredentials"in t)&&(o&&(n=function(t){n.progressSubscriber.next(t)},w.XDomainRequest?t.onprogress=n:t.upload.onprogress=n,n.progressSubscriber=o),r=function(t){var e,n=r,o=n.progressSubscriber,i=n.subscriber,s=n.request;o&&o.error(t);try{e=new Q("ajax error",this,s)}catch(t){e=t}i.error(e)},t.onerror=r,r.request=e,r.subscriber=this,r.progressSubscriber=o);function s(t){}function a(t){var e=a,n=e.subscriber,r=e.progressSubscriber,o=e.request;if(4===this.readyState){var i=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;if(0===i&&(i=s?200:0),i<400)r&&r.complete(),n.next(t),n.complete();else{r&&r.error(t);var u=void 0;try{u=new Q("ajax error "+i,this,o)}catch(t){u=t}n.error(u)}}}t.onreadystatechange=s,s.subscriber=this,s.progressSubscriber=o,s.request=e,t.onload=a,a.subscriber=this,a.progressSubscriber=o,a.request=e},e.prototype.unsubscribe=function(){var e=this.done,n=this.xhr;!e&&n&&4!==n.readyState&&"function"==typeof n.abort&&n.abort(),t.prototype.unsubscribe.call(this)},e}(P),K=function(){return function(t,e,n){this.originalEvent=t,this.xhr=e,this.request=n,this.status=e.status,this.responseType=e.responseType||n.responseType,this.response=$(this.responseType,e)}}(),Q=function(){function t(t,e,n){return Error.call(this),this.message=t,this.name="AjaxError",this.xhr=e,this.request=n,this.status=e.status,this.responseType=e.responseType||n.responseType,this.response=$(this.responseType,e),this}return t.prototype=Object.create(Error.prototype),t}();function $(t,e){switch(t){case"json":return function(t){return"response"in t?t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):JSON.parse(t.responseText||"null")}(e);case"xml":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}}var tt=function(t,e){return Q.call(this,"ajax timeout",t,e),this.name="AjaxTimeoutError",this},et=function(){return B.create}();function nt(t){return t&&"function"==typeof t.schedule}var rt=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}};function ot(t,e){return new H((function(n){var r=new U,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function it(t,e){return e?ot(t,e):new H(rt(t))}function st(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var at=st(),ut=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,n}return v(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(P),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(P),dt=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new lt(t,this.selector,this.caught))},t}(),lt=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.selector=n,o.caught=r,o}return v(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new ut(this);this.add(r);var o=function(t,e){if(!e.closed)return t instanceof H?t.subscribe(e):function(t){if(t&&"function"==typeof t[D])return o=t,function(t){var e=o[D]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((r=t)&&"number"==typeof r.length&&"function"!=typeof r)return rt(t);if(function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,_),t};if(t&&"function"==typeof t[at])return e=t,function(t){for(var n=e[at]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,r,o,i=A(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}(t)(e)}(n,r);o!==r&&this.add(o)}},e}(ct),pt=function(t){var e;!function(t){chrome.storage.local.get("debug",(function(e){!0===e.debug&&chrome.storage.local.set({errorReport:t},(function(){}))}))}(t),et({method:"POST",url:"https://script.google.com/macros/s/AKfycbxHvMYbvx5mEr0agkJSQCVNpG0tUmh1nLpNdjSkz5BKdxA6DtTS/exec",body:t}).pipe((e=function(t){return bt.warn("Error reporting error",t),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return nt(n)?(t.pop(),ot(t,n)):it(t)}(null)},function(t){var n=new dt(e),r=t.lift(n);return n.caught=r})).subscribe()},ft=function(t,e){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return"ERRORREPORT"===t&&pt(JSON.stringify(r)),!0===window.OneTTLog?window.console.log.bind(window.console,"%c[".concat(t,"]"),"color: ".concat(e)).apply(void 0,r):function(){}}},bt={info:ft("INFO","#55C1E8"),debug:ft("DEBUG","#FFDD4A"),warn:ft("WARN","#FE9000"),error:ft("ERROR","#FF0000"),errorReport:ft("ERRORREPORT","#FF0000")};const ht=bt;var vt=function(){var t=document.querySelector(".mod.mod-detail-gallery video[class=lib-video]"),e=t&&d([t.getAttribute("src")]),n=document.querySelector("#mod-detail-bd div.mod-detail-version2018-gallery")||document.querySelector("#mod-detail-bd div.mod-detail-gallery");console.log("videoElement2",n);var r=n&&n.getAttribute("data-mod-config")||"{}";console.log("videoDate",r);var o=JSON.parse(r);console.log("videoParsedData",o);var i="https://cloud.video.taobao.com/play/u/".concat(o.userId,"/p/2/e/6/t/1/").concat(o.videoId,".mp4");return console.log("videoUrl",e),console.log("videoUrl2",i),console.log("videoUrl || videoUrl2",e||i),e&&e[0]?e:[i]},yt=function(){var t=document.querySelectorAll("dl.tm-img-prop li a");ht.debug("imagesNodeList",t);var e=i(t).map((function(t){var e=t.getAttribute("style");return e&&e.replace("background:url(","").replace(")","")})).filter((function(t){return!!t}));return ht.debug("imageUrls",e),ht.debug("imageUrls",d(e)),d(e)},mt=function(){var t=document.querySelectorAll("#J_UlThumb > li img");ht.debug("imagesNodeList",t);var e=l(i(t));ht.debug("cleanedImageNodeList",e);var n=e.map((function(t){return t.getAttribute("src")}));return ht.debug("imageUrls",n),d(n)},gt=function(){var t=document.body.innerHTML.match(/imgVedioID":"([^"]*).*userId":"([^"]*)/);if(!t||3!==t.length)return[];var e=t&&t[1],n=t&&t[2];return["https://cloud.video.taobao.com/play/u/".concat(n,"/p/1/e/6/t/1/").concat(e,".mp4")]};document.body.innerHTML.indexOf("valFlashUrl");var wt=function(){var t=/descUrl\s*:\s*[^?]*[^:]*:\s*'([^']*)'/.exec(document.head.innerHTML),e=t&&t[1];return e&&c(e)},xt=function(){var t=document.body.innerHTML.match(/videoId":"([^"]*).*?videoOwnerId":"([^"]*)/);if(!t||3!==t.length)return[];var e=t&&t[1],n=t&&t[2];return["https://cloud.video.taobao.com/play/u/".concat(n,"/p/1/e/6/t/1/").concat(e,".mp4")]};chrome.storage.sync.get("subscription",(function(t){var e=!!t.subscription&&!!t.subscription.status&&"ACTIVE"===t.subscription.status;console.log("license",e,t),!0===/https?:\/\/detail\.1688\.com.*/.test(document.location.href)&&(n(1877),function(t){var e,n,r,o;e=window.document.querySelector("#dt-tab > div.tab-content-container"),(n=b({classes:["download-main-images-button"]})).addEventListener("click",(function(){return f("main")({imageUrls:(t=document.querySelectorAll("#dt-tab > div > ul > li img"),e=l(i(t)).map((function(t){return t.getAttribute("src")})),d(e)),videoUrls:[]})(n);var t,e})),e&&e.appendChild(n),((o=(r=window.document.querySelectorAll("div.d-content div.obj-content"))&&i(r))&&o.filter((function(t){return t.querySelectorAll("img").length>0}))).forEach((function(t){var e=b({classes:["download-variation-images-button"]});e.addEventListener("click",(function(){var t,n,r;f("variation")({imageUrls:(r=i((t=document.querySelectorAll("div.d-content div.obj-content > ul.list-leading li a img"),n=document.querySelectorAll("div.d-content div.obj-content > table > tbody > tr img"),t.length>0?t:n)).map((function(t){return t.getAttribute("data-lazy-src")||t.getAttribute("src")})),d(r)),videoUrls:[]})(e)})),t.appendChild(e)})),function(t){var e=document.querySelector("#mod-detail-description");ht.debug("productDetailsLink",e);var n=b({license:t,classes:["download-details-images-button"]});ht.debug("button",n),n.addEventListener("click",(function(){var e;t&&f("details-1688")({detailsUrl:(e=document.querySelector("#desc-lazyload-container"),e&&e.getAttribute("data-tfs-url"))})(n)})),e&&e.appendChild(n)}(t),function(t){var e=document.querySelector(".mod-detail-video.mod-info.mod"),n=e&&e.getAttribute("data-mod-config");if(!0===(n&&!0===/detailVideoId":"[0-9]+"/.test(n))){var r=document.querySelector("#offer_video_wrap"),o=b({license:t,classes:["download-details-images-button"]});o.addEventListener("click",(function(){var e;t&&f("video")({videoUrls:(e=document.querySelector("div[data-widget-name=offerdetail_common_video] video[class=lib-video]"),e&&d([e.getAttribute("src")])||[])})(o)})),r&&r.appendChild(o)}}(t),function(t){var e=document.querySelector(".mod.mod-detail-gallery"),n=e&&e.getAttribute("data-mod-config");if(!0===(n&&!0===/videoId":"[0-9]{2,}"/.test(n))){var r=new MutationObserver((function(e){e.forEach((function(e){if(e.addedNodes)for(var n=0;n<e.addedNodes.length;n++){var o=e.addedNodes[n];ht.debug("node",o),"iconfontcdn iconfont-videoPlay"===o.getAttribute("class")&&function(){var e=b({license:t,classes:["download-details-video-button"]});e.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation(),t&&f("video")({videoUrls:vt()})(e)})),o&&o.appendChild(e),r.disconnect()}()}}))})),o=document.querySelector(".tab-pane");o&&r.observe(o,{childList:!0,subtree:!1,attributes:!1})}}(t)}(e)),!0===/https?:\/\/detail\.tmall\.com.*/.test(document.location.href)&&(n(1907),function(t){var e;!function(){ht.debug("> HERE");var t=window.document.querySelector("#J_UlThumb"),e=b({classes:["download-main-images-button"]});e.addEventListener("click",(function(){return f("main")({imageUrls:mt(),videoUrls:[]})(e)})),t&&t.appendChild(e)}(),(e=window.document.querySelectorAll("dl.tm-img-prop"))&&i(e).forEach((function(t){var e=b({classes:["download-variation-images-button"]});e.addEventListener("click",(function(){f("variation")({imageUrls:yt(),videoUrls:[]})(e)})),t.appendChild(e)})),function(t){var e=document.querySelector("#description"),n=b({classes:["download-details-images-button"],license:t});n.addEventListener("click",(function(){var e,r;t&&f("details-tmall")({detailsUrl:(e=document.body.innerHTML.match(/"httpsDescUrl":"([^"]*)/),r=e&&e[1],r&&c(r))})(n)})),e&&e.appendChild(n)}(t),function(t){if(1==(-1!==document.body.innerHTML.indexOf("valFlashUrl"))){var e=new MutationObserver((function(n){n.forEach((function(n){if(n.addedNodes)for(var r=0;r<n.addedNodes.length;r++){var o=n.addedNodes[r];ht.debug("node",o),"item-flash"===o.getAttribute("id")&&function(){var n=b({classes:["download-details-video-button"],license:t});n.addEventListener("click",(function(){t&&f("video")({videoUrls:gt()})(n)})),o&&o.appendChild(n),e.disconnect()}()}}))})),n=document.querySelector("#mainwrap");n&&e.observe(n,{childList:!0,subtree:!1,attributes:!1})}}(t),function(t){var e=-1!==document.body.innerHTML.indexOf("imgVedioID");if(ht.debug("document.body.innerHTML.indexO",document.body.innerHTML.indexOf("imgVedioID")),ht.debug("shouldWaitForVideo",e),!0===e){var n=new MutationObserver((function(e){e.forEach((function(e){if(e.addedNodes){ht.debug("BEFORE LOOP");for(var r=0;r<e.addedNodes.length;r++){var o=e.addedNodes[r];ht.debug("node",o),ht.debug("node",o.TAG_NAME),"tm-video-play J_playVideo"===o.getAttribute("class")&&function(){var e=b({classes:["download-main-video-button"],license:t});e.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation(),t&&f("video")({videoUrls:gt()})(e)})),o&&o.appendChild(e),n.disconnect()}()}}}))})),r=document.querySelector("#J_DetailMeta div.tb-booth");r&&n.observe(r,{childList:!0,subtree:!1,attributes:!1})}}(t)}(e)),!0===/https?:\/\/item\.taobao\.com.*/.test(document.location.href)&&(n(6318),function(t){var e,n,r,o;e=window.document.querySelector("#J_UlThumb"),n=!0===/videoId/.test(document.body.innerHTML)?"download-main-images-button shift":"download-main-images-button",(r=b({classes:[n]})).addEventListener("click",(function(){return f("main")({imageUrls:(t=document.querySelectorAll("#J_UlThumb > li img"),e=l(i(t)).map((function(t){return t.getAttribute("src")})),d(e)),videoUrls:[]})(r);var t,e})),e&&e.appendChild(r),(o=window.document.querySelectorAll("#J_isku ul.tb-img"))&&i(o).forEach((function(t){var e=b({classes:["download-variation-images-button"],attribues:[{name:"data-property",value:t.getAttribute("data-property")}]});e.addEventListener("click",(function(){var t;f("variation")({imageUrls:(t=i(document.querySelectorAll("#J_isku ul.tb-img > li > a")).filter((function(t){return!!t.getAttribute("style")})).map((function(t){return t.getAttribute("style").replace("background:url(","").replace(")","")})),ht.debug("imageUrls",t),ht.debug("imageUrls",d(t)),d(t)),videoUrls:[]})(e)})),t.parentNode.parentNode.appendChild(e)})),function(t){var e=document.querySelector("#description"),n=b({license:t,classes:["download-details-images-button"]});ht.debug("createDownloadDescriptionImagesButton",wt()),n.addEventListener("click",(function(){t&&f("details-taobao")({detailsUrl:wt()})(n)})),e&&e.appendChild(n)}(t),function(t){if(!1!==/videoId/.test(document.body.innerHTML)){var e=window.document.querySelector("#J_UlThumb"),n=b({license:t,classes:["download-video-button"]});n.addEventListener("click",(function(){t&&f("main")({imageUrls:[],videoUrls:xt()})(n)})),e&&e.appendChild(n)}}(t)}(e))}))})()})();